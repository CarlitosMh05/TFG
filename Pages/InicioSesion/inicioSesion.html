<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="stylesheet" href="../styles.css">
        <link rel="stylesheet" href="inicioSesion.css">
        <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Inconsolata:wght@200..900&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://apis.google.com/js/platform.js" async defer></script>

    </head>
    <body>
        <form>
            <h2>Iniciar sesion</h2>

            <div id="g_id_onload"
                data-client_id="496963660713-qvce6cj1kn74gnj4o7ec04hhutpka9bi.apps.googleusercontent.com"
                data-context="use"
                data-ux_mode="pop-up"
                data-callback="handleCredentialResponse"
                data-auto_prompt="true">
            </div>

            <div
                style="margin-bottom: 30px; width: 100%;" 
                class="g_id_signin"
                data-type="standard"
                data-shape="square"
                data-theme="outline"
                data-text="signup_with"
                data-size="large"
                data-logo_alignment="left"
                data-width="100%">
            </div>

            <script src="https://accounts.google.com/gsi/client" async defer></script>

            <div class="input-container" style="margin-bottom: 30px;">
                <input type="email" id="email" placeholder=" " required>
                <label for="email">Correo</label>
                <p class="bad-text badEmail">Debes introducir un email</p>
            </div>

            <div class="input-container">
                <input type="password" id="password" placeholder=" " required>
                <label for="password">Contraseña</label>
                <button type="button" class="toggle-password" onclick="togglePassword()" style="display: none;">
                    <span class="material-symbols-outlined" id="icon">visibility</span>
                </button>
                <p class="badPwd bad-text">Debes introducir una contraseña</p>
                <a href="../forgotPwd/forgotPwd.html" class="forgot-text">¿Olvidaste tu contraseña?</a>
            </div>

            <section class="buttons">
                <input type="button" value="Crear Cuenta" id="crearCuenta" onclick='window.location.href = "../CrearCuenta/crearCuenta.html";'>
                <input type="button" value="Siguiente" id="next">
            </section>

            

        </form>
    </body>

    <script>
        function handleCredentialResponse(response) {
            $.ajax({
                url: 'google-callback.php',
                type: 'POST',
                data: { credential: response.credential },
                success: function (res) {
                    const data = JSON.parse(res);
                    if (data.success) {
                        window.location.href = "../Principal/principal.php";
                    } else {
                        alert("Error al iniciar sesión con Google.");
                    }
                },
                error: function () {
                    alert("Error en el servidor.");
                }
            });
        }
    </script>

    <script src="inicioSesion.js"></script>
</html>
